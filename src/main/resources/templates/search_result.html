<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--========== The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags ==========-->
    <title>Home</title>
    <!--==========Dependency============-->
    <link rel="stylesheet" href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" href="../static/css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}">
    <link rel="stylesheet" href="../static/vendors/owl-carousel/assets/owl.carousel.css" th:href="@{/vendors/owl-carousel/assets/owl.carousel.css}">
    <link rel="stylesheet" href="../static/vendors/magnific-popup/magnific-popup.css" th:href="@{/vendors/magnific-popup/magnific-popup.css}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Kanit:500">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans:600,700italic">
    <link href='https://fonts.googleapis.com/css?family=Dosis:400,200,300,500,600,800,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:400,300,300italic,400italic">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500italic,500,700italic,700,900,900italic' rel='stylesheet' type='text/css'>
    <!--==========Theme Styles==========-->
    <link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="../static/css/theme/green.css" th:href="@{/css/theme/green.css}">
    <!--========== HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries ==========-->
    <!--========== WARNING: Respond.js doesn't work if you view the page via file:// ==========-->
    <!--==========[if lt IE 9]>
    <script src="js/html5shiv.min.js"></script>
    <script src="js/respond.min.js"></script>
<![endif]==========-->
    <link rel="stylesheet" type="text/css" href="../static/css/index.css" th:href="@{/css/index.css}">
</head>

<body class="home">
    <header>
        <div class="container-fluid">
            <div class="row">
                <div class="span12" >
                    <nav class="navbar navbar-default navbar-fixed-top">
                        <div class="container">
                            <!-- Brand and toggle get grouped for better mobile display -->
                            <div class="navbar-header" >
                                <a class="navbar-brand" href="/index">我的博客</a>
                            </div>
                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                <ul class="nav navbar-nav">
                                    <li>
                                        <a href="/article/popular" id="popular" class="nav-a">
                                        热门文章
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/article/newest" id="newest" class="nav-a">
                                        最新
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/home/latest" class="nav-a">
                                        关于
                                        </a>
                                    </li>
                                </ul>
                                <form class="navbar-form navbar-left">
                                    <div class="form-group">
                                        <input id="search-input" type="text" class="form-control" placeholder="Search">
                                    </div>
                                    <button id="search-btn" type="submit" class="btn btn-default">Search</button>
                                </form>

                                <ul class="nav navbar-nav navbar-right">
                                    <li>
                                        <p class="navbar-text">
                                            <a href="/article/editor" class="navbar-link">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            写博客
                                            </a>
                                        </p>
                                    </li>
                                    <li class="before-login">
                                        <button type="button" class="btn btn-default navbar-btn">
                                            <a href="/home/login">
                                                <font color="#000">
                                                登入
                                                </font> 
                                            </a>
                                        </button>
                                    </li>
                                    <li class="before-login">
                                        <button type="button" class="btn btn-default navbar-btn">
                                            <a  href="/home/register">
                                                <font color="#000">
                                                    注册
                                                </font> 
                                            </a>
                                        </button>    
                                    </li>
                                  
                                    <li class="after-login" style="display: none" >
                                        <!-- Single button -->
                                        <div class="btn-group">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <img id="user_img" src="../static/images/默认头像.jpg" 
                                            th:src="@{${session.user}==null?'/images/默认头像.jpg':${session.user.userImg}}" > 
                                            </a> 
                                          <ul class="dropdown-menu">
                                            <li><a href="/dashboard/user-manager">博客管理</a></li>
                                            <li><a href="/dashboard/admin" id="admin-a">控制台</a></li>
                                            <li><a id="exit-id" href="#">退出</a></li>
                                          </ul>
                                        </div>
                                    </li>
                                </ul>
                            </div><!-- /.navbar-collapse -->
                        </div><!-- /.container-fluid -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <section class="row content-wrap">
        <div class="container">
            <div class="row" id="post-masonry">
                <!--Blog Post-->
                <article class="col-sm-4 post post-masonry post-format-image" th:each="item : ${article}" >
                    <div class="post-wrapper row">
                        <div class="featured-content row">
                           <!--  <a href="single.html">
                                <img src="../static/images/posts/masonry/1.jpg" th:src="@{/images/posts/masonry/1.jpg}" alt="" class="img-responsive">
                            </a> -->
                        </div>
                        <div class="post-excerpt row">
                            <h5 class="post-meta">
                                <a href="#" class="date" th:text="${#dates.format(item.articleTime, 'yyyy-MM-dd')}">feb 17, 2016</a>
                                <span class="post-author">
                                    <i>by</i>
                                    <a href="/article/get" th:href="'/article/get?id='+${item.Id}+'&userId='+${item.userId}" th:text="${item.userName}">Mark Sanders</a>
                                </span>
                            </h5>
                            <h3 class="post-title">
                                <a href="/article/get" th:href="'/article/get?id='+${item.Id}+'&userId='+${item.userId}" th:text="${item.articleTitle}">Nature, in the broadest sense, is the natural, physical, or material world or universe.</a>
                            </h3>
                            <p th:text="${item.outline}">In the broadest sense, is the natural, physical, or material world or universe...</p>
                            <footer class="row">
                                <!--标签-->
                                <h5 class="taxonomy">
                                    <i>in</i> 
                                    <a href="#">image</a>, 
                                    <a href="#">entertainment</a>
                                </h5>
                                <div class="response-count" th:text="${item.articleRead}">
                                    <img src="../static/images/comment-icon-gray.png" th:src="@{/images/comment-icon-gray.png}" alt="阅读量">5</div>
                            </footer>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </section>
    <!--Footer-->
    <footer class="row" id="footer">
        <div class="container">
            <div class="row top-footer">
                <!--     <div class="widget col-sm-3 widget-about">
                    <div class="row m0"><a href="index.html"><img src="../static/images/logo-black-green.png" alt=""></a></div>
                </div>
                <div class="widget col-sm-5 widget-menu">
                    <div class="row">
                        <ul class="nav column-menu white-bg">
                            <li class="active"><a href="index.html">Home</a></li>
                            <li><a href="about.html">About</a></li>
                            <li><a href="single.html">Blog Single 1</a></li>
                            <li><a href="single2.html">Blog Single 2</a></li>
                        </ul>
                        <ul class="nav column-menu white-bg">
                            <li><a href="single3.html">Blog Single 3</a></li>
                            <li><a href="contact.html">contact</a></li>
                        </ul>
                    </div>
                </div>
                <div class="widget col-sm-4 widget-subscribe">
                    <h5 class="widget-title">subscribe to our newsletter.</h5>
                    <form action="#" method="post" class="form-inline subscribe-form">
                        <div class="form-group">
                            <input type="email" class="form-control" placeholder="Email">
                        </div>
                        <button type="submit" class="btn btn-primary btn-sm"><span>send</span></button>
                    </form>
                </div> -->
            </div>
            <h5 class="copyright">Copyright &copy; 2019.Company name All rights reserved.More Templates</h5>
        </div>
    </footer>
    <!--========== jQuery (necessary for Bootstrap's JavaScript plugins) ==========-->
    <script src="../static/js/jquery-2.2.0.min.js" th:src="@{/js/jquery-2.2.0.min.js}"></script>
    <script src="../static/js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
    <script src="../static/vendors/owl-carousel/owl.carousel.min.js" th:src="@{/vendors/owl-carousel/owl.carousel.min.js}"></script>
    <script src="../static/vendors/magnific-popup/jquery.magnific-popup.min.js" th:src="@{/vendors/magnific-popup/jquery.magnific-popup.min.js}"></script>
    <script src="../static/vendors/instafeed/instafeed.min.js" th:src="@{/vendors/instafeed/instafeed.min.js}"></script>
    <script src="../static/vendors/imagesLoaded/imagesloaded.pkgd.min.js" th:src="@{/vendors/imagesLoaded/imagesloaded.pkgd.min.js}"></script>
    <script src="../static/vendors/isotope/isotope.pkgd.min.js" th:src="@{/vendors/isotope/isotope.pkgd.min.js}"></script>
    <script src="../static/js/theme.js" th:src="@{/js/theme.js}"></script>
    <script th:inline="javascript">

        var user = /*[[${session.user}]]*/ null;

        $(document).ready(function(){
            alert(user.userName);
            $.get('http://localhost:8080/');
            if (user != null&&user.userId != null){
                $(".after-login").css("display","inline-block");
                $(".before-login").css("display","none");
                alert(user.userName);
                if(user.role!="管理员")
                    $("#admin-a").hide();
            } 

        });
        
        $("#exit-id").click(function(){
             $(".after-login").css("display","none");
             $(".before-login").css("display","inline-block");
             alert("下次再来！！！");
        });

        $("a.nav-a").click(function(){
            $("a.nav-a").parent().removeClass("active");
            $(this).parent().addClass("active");
            var option = $(this).attr("id");
            alert(option);
          /*  $("#post-masonry").load("http://localhost:8080/article/"+option); */
            $.get(
                "http://localhost:8080/article/"+option
                );
            return false;
        });
        //搜索按钮
        $("#search-btn").click(function(){
            var str = $("#search-input").val();
            if(str==null)
                alert("请输入关键词！！！");
            alert(str);
            $.get(
                    "http://localhost:8080/esblog//similar",
                    { 
                        "str": str
                    }
                );
        });
    </script>
</body>

</html>